<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/container"
    android:background="?attr/colorBackgroundPrimary"
    android:animateLayoutChanges="false"
    style="@style/UiKit.ViewGroup.LinearLayout">
    <LinearLayout
        android:gravity="center_vertical"
        android:id="@+id/attachment_preview_container"
        android:visibility="gone"
        style="@style/UiKit.ViewGroup.LinearLayout.Horizontal">
        <androidx.recyclerview.widget.RecyclerView
            android:orientation="horizontal"
            android:id="@+id/attachment_preview_list"
            android:clipToPadding="false"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            app:layoutManager="LinearLayoutManager"/>
        <androidx.appcompat.widget.AppCompatImageButton
            android:id="@+id/attachment_clear_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_clear_24dp"
            android:contentDescription="@string/clear_attachments"
            android:elevation="4dp"
            style="@style/FlexInput.Input.Button"/>
    </LinearLayout>
    <RelativeLayout
        android:animateLayoutChanges="true"
        style="@style/UiKit.ViewGroup">
        <LinearLayout
            android:id="@+id/left_btns_container"
            android:layout_width="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="8dp"
            android:layout_marginBottom="8dp"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            style="@style/UiKit.ViewGroup.LinearLayout.Horizontal">
            <androidx.appcompat.widget.AppCompatImageButton
                android:layout_gravity="center_vertical"
                android:id="@+id/expand_btn"
                android:padding="8dp"
                android:visibility="gone"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_carot_right_24dp"
                android:contentDescription="@string/expand_buttons"
                app:tint="?attr/colorInteractiveNormal"
                style="@style/FlexInput.Input"/>
            <androidx.appcompat.widget.AppCompatImageButton
                android:id="@+id/gallery_btn"
                android:background="@drawable/drawable_circle_black"
                android:padding="8dp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="6dp"
                android:layout_marginRight="8dp"
                android:src="@drawable/ic_add_24dp"
                android:contentDescription="@string/attachment_media"
                android:backgroundTint="?attr/colorBackgroundSecondaryAlt"
                app:tint="?attr/colorInteractiveNormal"
                style="@style/FlexInput.Input"/>
            <androidx.appcompat.widget.AppCompatImageButton
                android:id="@+id/gift_btn"
                android:background="@drawable/drawable_circle_black"
                android:padding="8dp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="8dp"
                android:src="@drawable/ic_gift_24dp"
                android:contentDescription="@string/premium_gifting_purchase_gift"
                android:backgroundTint="?attr/colorBackgroundSecondaryAlt"
                app:tint="?attr/colorInteractiveNormal"
                style="@style/FlexInput.Input"/>
        </LinearLayout>
        <LinearLayout
            android:id="@+id/main_input_container"
            android:background="@drawable/drawable_flex_input_bg"
            android:paddingLeft="12dp"
            android:paddingRight="4dp"
            android:layout_marginTop="8dp"
            android:layout_marginRight="8dp"
            android:layout_marginBottom="8dp"
            android:layout_toLeftOf="@+id/send_btn_container"
            android:layout_toRightOf="@+id/left_btns_container"
            android:layout_centerVertical="true"
            android:animateLayoutChanges="true"
            style="@style/UiKit.ViewGroup.LinearLayout.Horizontal">
            <com.lytefast.flexinput.widget.FlexEditText
                android:textSize="@dimen/uikit_textsize_medium"
                android:textColor="?attr/colorTextNormal"
                android:textColorHint="?attr/colorTextMuted"
                android:layout_gravity="center_vertical"
                android:id="@+id/text_input"
                android:background="@color/transparent"
                android:paddingTop="4dp"
                android:paddingBottom="4dp"
                android:focusableInTouchMode="true"
                android:scrollbars="vertical"
                android:layout_width="0dp"
                android:minHeight="40dp"
                android:maxLines="5"
                android:layout_weight="1"
                android:lineSpacingMultiplier="1"
                android:inputType="textMultiLine"
                android:imeOptions="flagNoExtractUi"
                android:importantForAutofill="no"
                style="@style/UiKit.TextView"/>
            <FrameLayout
                android:layout_gravity="center_vertical"
                android:id="@+id/expression_btn_container"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">
                <androidx.appcompat.widget.AppCompatImageButton
                    android:id="@+id/expression_btn"
                    android:background="@null"
                    android:padding="8dp"
                    android:visibility="gone"
                    android:src="@drawable/ic_emoji_24dp"
                    android:contentDescription="@string/emoji"
                    app:tint="?attr/colorInteractiveNormal"
                    style="@style/UiKit.ImageButton"/>
                <ImageView
                    android:layout_gravity="bottom|right"
                    android:id="@+id/expression_btn_badge"
                    android:visibility="gone"
                    android:layout_width="7dp"
                    android:layout_height="7dp"
                    android:layout_marginRight="11dp"
                    android:layout_marginBottom="11dp"
                    android:src="@drawable/drawable_circle_red"
                    android:importantForAccessibility="no"
                    app:tint="@color/status_red_500"/>
            </FrameLayout>
        </LinearLayout>
        <FrameLayout
            android:id="@+id/send_btn_container"
            android:background="@drawable/drawable_circle_black"
            android:visibility="gone"
            android:clipToPadding="false"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_marginLeft="8dp"
            android:layout_marginTop="8dp"
            android:layout_marginRight="12dp"
            android:layout_marginBottom="8dp"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:contentDescription="@string/send_message"
            android:animateLayoutChanges="true"
            android:backgroundTint="?attr/chat_send_btn_bg">
            <ImageView
                android:layout_gravity="center"
                android:id="@+id/send_btn_image"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_send_24dp"
                android:importantForAccessibility="no"
                app:tint="?attr/chat_send_btn"/>
        </FrameLayout>
        <TextView
            android:gravity="center"
            android:id="@+id/cannot_send_text"
            android:background="?attr/colorBackgroundSecondary"
            android:paddingLeft="12dp"
            android:paddingTop="24dp"
            android:paddingRight="12dp"
            android:paddingBottom="24dp"
            android:focusable="true"
            android:visibility="gone"
            android:clickable="true"
            android:layout_height="wrap_content"
            android:text="@string/no_send_messages_permission_placeholder"
            android:layout_alignParentStart="true"
            android:layout_alignParentEnd="true"
            style="@style/UiKit.TextView"/>
    </RelativeLayout>
    <FrameLayout
        android:id="@+id/expression_tray_container"
        android:visibility="gone"
        android:layout_width="match_parent"
        android:layout_height="@dimen/default_keyboard_height"/>
    <FrameLayout
        android:id="@+id/default_window_insets_handler"
        android:visibility="visible"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>
</LinearLayout>
